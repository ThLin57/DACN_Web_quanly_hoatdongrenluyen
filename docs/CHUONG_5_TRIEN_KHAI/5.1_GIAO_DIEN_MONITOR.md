# 5.1.3.C - DASHBOARD MONITOR (Lớp trưởng)

**File:** `frontend/src/pages/monitor/MonitorDashboard.js`

## a) Mô tả

Dashboard Monitor được thiết kế cho lớp trưởng để quản lý hoạt động của lớp, tạo hoạt động mới, phê duyệt đăng ký sinh viên, và theo dõi tình hình tham gia của lớp. Giao diện tập trung vào workflow tạo và quản lý hoạt động.

## b) Các thành phần chính

### 1. Header Section

```
- Tiêu đề: "Dashboard Lớp trưởng"
- Subtitle: "Lớp: LT_CNTT_K19A | SL: 45 sinh viên"
- Semester selector
- Button: "+ Tạo hoạt động mới" (Primary, prominent)
```

### 2. Statistics Cards (5 cards)

**Card 1: Hoạt động đã tạo**
```
Icon: Activity (blue)
Value: 12 hoạt động
Subtitle: "Trong học kỳ này"
Progress bar: 12/15 (quota)
Color: Blue gradient
Click → Navigate to /monitor/my-activities
```

**Card 2: Chờ giảng viên duyệt**
```
Icon: Clock (orange)
Value: 3 hoạt động
Subtitle: "Đang chờ phê duyệt"
Badge: Orange "3"
Color: Orange gradient
Click → Navigate to /monitor/my-activities?status=pending
```

**Card 3: Đăng ký chờ duyệt**
```
Icon: UserCheck (purple)
Value: 8 đăng ký
Subtitle: "Từ sinh viên lớp"
Badge: Red "8"
Color: Purple gradient
Click → Navigate to /monitor/approvals
```

**Card 4: Sinh viên đã tham gia**
```
Icon: Users (green)
Value: 32/45 SV
Subtitle: "Tỷ lệ: 71%"
Progress bar: 71%
Color: Green gradient
Click → Navigate to /monitor/class-stats
```

**Card 5: Điểm TB lớp**
```
Icon: Award (indigo)
Value: 76 điểm
Subtitle: "Trung bình lớp"
Color: Indigo gradient
Click → Navigate to /monitor/class-report
```

### 3. Quick Actions (4 cards)

```
Card 1: "Tạo hoạt động"
  Icon: Plus + Activity
  Description: "Tạo hoạt động mới cho lớp"
  Color: Blue (primary)
  Button: "Tạo ngay"
  Action: Navigate to /monitor/create-activity

Card 2: "Phê duyệt đăng ký"
  Icon: CheckCircle
  Description: "Duyệt đăng ký tham gia của SV"
  Color: Green
  Badge: "8 chờ duyệt"
  Button: "Xem danh sách"
  Action: Navigate to /monitor/approvals

Card 3: "Quản lý hoạt động"
  Icon: Activity
  Description: "Xem và chỉnh sửa hoạt động"
  Color: Purple
  Button: "Xem tất cả"
  Action: Navigate to /monitor/my-activities

Card 4: "Tạo mã QR điểm danh"
  Icon: QrCode
  Description: "Tạo QR cho hoạt động"
  Color: Orange
  Button: "Tạo QR"
  Action: Navigate to /monitor/qr-attendance
```

### 4. My Activities Section

**Hoạt động của tôi (List/Grid):**
```
Grid layout: 2-3 columns

Each card:
  - Thumbnail image (if available)
  - Tên hoạt động (bold, 2 lines max)
  - Ngày tổ chức: "15/10/2024 08:00"
  - Địa điểm: "Hội trường A"
  - Số lượng: "45/50 người"
  - Điểm rèn luyện: "+10 điểm"
  - Status badge:
    - Chờ duyệt (Orange)
    - Đã duyệt (Green)
    - Từ chối (Red)
  - Actions:
    - [Sửa] (Edit icon)
    - [Xóa] (Trash icon)
    - [QR] (QR code icon)
    - [Xem] (Eye icon)

Filter: 
  - Trạng thái: Tất cả | Chờ duyệt | Đã duyệt | Từ chối
  - Sort: Mới nhất | Cũ nhất | Tên A-Z

Pagination: 6 items per page
Empty state: "Bạn chưa tạo hoạt động nào. [+ Tạo hoạt động đầu tiên]"
```

### 5. Pending Registrations Section

```
Title: "Đăng ký chờ duyệt"
Subtitle: "Sinh viên muốn tham gia hoạt động"

List items (Card view):
  ┌────────────────────────────────────────────┐
  │ 👤 Nguyễn Văn A (SV000001)                 │
  │ 📊 Hoạt động: Workshop AI & ML             │
  │ 📅 Đăng ký lúc: 10/10/2024 14:30          │
  │ 💬 Ghi chú: "Em rất quan tâm đến AI"      │
  │                                            │
  │ [Duyệt ✓] [Từ chối ✗] [Xem hồ sơ 👁]     │
  └────────────────────────────────────────────┘

Bulk actions:
  - Checkbox: Select all
  - Button: "Duyệt tất cả đã chọn"
  - Button: "Từ chối tất cả đã chọn"

Pagination: 5 items per page
Empty state: "Không có đăng ký nào chờ duyệt"
```

### 6. Class Participation Chart

```
Chart type: Bar chart (Recharts)
X-axis: Tên sinh viên (top 10)
Y-axis: Số hoạt động đã tham gia

Data:
  - Bar color: Gradient blue
  - Show value on top of bars
  
Tooltip: 
  - Tên sinh viên
  - Số hoạt động: X
  - Điểm tích lũy: Y

Button: "Xem báo cáo đầy đủ" → /monitor/class-report
```

## c) Layout

```
┌────────────────────────────────────────────────────────────────┐
│  DASHBOARD LỚP TRƯỞNG         [+ Tạo hoạt động] [🔔] [👤 LT]  │
│  Lớp: LT_CNTT_K19A | 45 sinh viên                             │
├────────────────────────────────────────────────────────────────┤
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐          │
│  │📊 Đã:12  │ │⏰ Chờ:3  │ │👤 ĐK:8   │ │✅ Tham:32│          │
│  │▓▓▓▓▓░░   │ │  [Badge] │ │ [Badge]  │ │ 71% ▓▓▓▓ │          │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘          │
│  ┌──────────┐                                                  │
│  │🎖 ĐTB:76 │                                                  │
│  └──────────┘                                                  │
│                                                                 │
│  THAO TÁC NHANH                                                │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐           │
│  │ + Tạo HD     │ │ Duyệt đăng ký│ │ Quản lý HD   │           │
│  │ [Tạo ngay]   │ │ [8] → Xem    │ │ [Xem tất cả] │           │
│  └──────────────┘ └──────────────┘ └──────────────┘           │
│                                                                 │
│  HOẠT ĐỘNG CỦA TÔI                              [Filter ▼]    │
│  ┌────────────┐ ┌────────────┐ ┌────────────┐                │
│  │ [IMG]      │ │ [IMG]      │ │ [IMG]      │                │
│  │ Workshop AI│ │ Bóng đá    │ │ Tình nguyện│                │
│  │ 15/10 08:00│ │ 20/10 14:00│ │ 25/10 07:00│                │
│  │ 45/50 👥   │ │ 30/40 👥   │ │ 50/60 👥   │                │
│  │ [Đã duyệt] │ │ [Chờ duyệt]│ │ [Đã duyệt] │                │
│  │ ✏️ 🗑️ 🔲 👁│ │ ✏️ 🗑️ 🔲 👁│ │ ✏️ 🗑️ 🔲 👁│                │
│  └────────────┘ └────────────┘ └────────────┘                │
│                                                                 │
│  ĐĂNG KÝ CHỜ DUYỆT                                            │
│  ┌──────────────────────────────────────────────────────────┐ │
│  │ 👤 Nguyễn Văn A (SV000001)                               │ │
│  │ 📊 Workshop AI & ML | 📅 10/10/2024 14:30               │ │
│  │ [Duyệt ✓] [Từ chối ✗] [Xem hồ sơ 👁]                    │ │
│  ├──────────────────────────────────────────────────────────┤ │
│  │ 👤 Trần Thị B (SV000002)                                 │ │
│  │ 📊 Bóng đá khoa | 📅 10/10/2024 15:00                   │ │
│  │ [Duyệt ✓] [Từ chối ✗] [Xem hồ sơ 👁]                    │ │
│  └──────────────────────────────────────────────────────────┘ │
│                                                                 │
│  BIỂU ĐỒ THAM GIA LỚP                  [Xem báo cáo đầy đủ →]│
│  ┌──────────────────────────────────────────────────────────┐ │
│  │ [Bar Chart - Top 10 sinh viên tham gia nhiều nhất]      │ │
│  │ SV A ████████ 8                                          │ │
│  │ SV B ███████ 7                                           │ │
│  │ SV C ██████ 6                                            │ │
│  └──────────────────────────────────────────────────────────┘ │
└────────────────────────────────────────────────────────────────┘
```

## d) Interactions

### Tạo hoạt động workflow:

```
1. Click "+ Tạo hoạt động mới"
   → Navigate to /monitor/create-activity
   
2. Form fields:
   - Tên hoạt động (required)
   - Mô tả (textarea, required)
   - Loại hoạt động (select, required)
   - Ngày bắt đầu (date + time, required)
   - Ngày kết thúc (date + time, required)
   - Địa điểm (text, required)
   - Số lượng tối đa (number, required)
   - Điểm rèn luyện (number, required)
   - Hình ảnh (file upload, max 5 images)
   
3. Validation:
   - Ngày kết thúc > Ngày bắt đầu
   - Số lượng > 0
   - Điểm rèn luyện: 0-100
   - File size < 5MB per image
   - Image formats: jpg, png, webp
   
4. Submit:
   → API call: POST /api/monitor/activities
   → Show loading spinner on button
   → On success:
     - Toast: "Tạo hoạt động thành công! Đang chờ giảng viên duyệt"
     - Navigate back to dashboard
     - Update stats (+1 pending)
```

### Phê duyệt đăng ký workflow:

```
1. Click "Duyệt" button
   → Show confirmation modal
   → "Phê duyệt đăng ký của Nguyễn Văn A?"
   → [Hủy] [Xác nhận]
   
2. Click "Xác nhận"
   → API call: POST /api/monitor/registrations/:id/approve
   → On success:
     - Toast: "Đã duyệt đăng ký"
     - Remove from pending list
     - Update badge count (-1)
     - Send notification to student
     
3. Click "Từ chối"
   → Show modal with textarea
   → "Lý do từ chối (bắt buộc): _____"
   → [Hủy] [Gửi]
   → API call: POST /api/monitor/registrations/:id/reject { reason }
   → On success:
     - Toast: "Đã từ chối đăng ký"
     - Send notification to student with reason
```

### Tạo QR code workflow:

```
1. Click "Tạo QR" icon trên activity card
   → Navigate to /monitor/qr-attendance?activity=:id
   
2. QR Generation page:
   - Activity name (display)
   - QR code (auto-generated)
   - Expiry time: 1 hour (configurable)
   - Button: "Tải xuống QR" (Download PNG)
   - Button: "In QR" (Print)
   - Button: "Chia sẻ" (Share link)
   
3. Student scans QR:
   → Auto attendance check-in
   → Update registration status to "Đã tham gia"
   → Monitor sees real-time count update
```

### Edit activity workflow:

```
1. Click "Edit" icon
   → Navigate to /monitor/edit-activity/:id
   
2. Pre-filled form với existing data
   
3. Validation:
   - Chỉ cho edit nếu status = "Chờ duyệt" hoặc "Từ chối"
   - Nếu "Đã duyệt": Show warning "Cần approval lại từ GV"
   
4. Submit:
   → API call: PUT /api/monitor/activities/:id
   → Reset status to "Chờ duyệt" nếu đã duyệt
   → On success: Toast + Navigate back
```

## e) Responsive behavior

**Mobile (< 768px):**
- Stats cards: 1 column (stack)
- Quick actions: 1 column
- My activities: 1 column (list view)
- Pending registrations: Card view (full width)
- Chart: Reduce height, horizontal scroll

**Tablet (768px - 1024px):**
- Stats cards: 2-3 columns
- Quick actions: 2 columns
- My activities: 2 columns (grid)
- Pending registrations: 1-2 columns

**Desktop (> 1024px):**
- Stats cards: 5 columns (1 row) or 3+2 layout
- Quick actions: 4 columns
- My activities: 3 columns (grid)
- Chart: Full width, larger height

## f) Special features

### Activity Quota Widget

```
Hiển thị khi gần đạt quota (> 80%):

┌──────────────────────────────────────────┐
│ ⚠️ SẮP ĐẠT GIỚI HẠN TẠO HOẠT ĐỘNG       │
│                                          │
│ Bạn đã tạo: 12/15 hoạt động              │
│ ▓▓▓▓▓▓▓▓▓▓░░░░░ 80%                     │
│                                          │
│ Hãy quản lý hoạt động hiệu quả!          │
└──────────────────────────────────────────┘

Color: Orange gradient
Auto-hide: Khi < 80%
```

### Real-time Updates

```
WebSocket / Polling for:
  - New registration notifications
  - Activity approval status changes
  - Registration count updates
  - QR code scan events

Toast notifications:
  - "Nguyễn Văn A đã đăng ký hoạt động Workshop AI"
  - "Hoạt động 'Bóng đá' đã được giảng viên phê duyệt"
  - "5 sinh viên đã điểm danh hoạt động Workshop AI"
```

### Bulk Operations

```
Select multiple registrations:
  - Checkbox on each card
  - "Chọn tất cả" checkbox in header
  
Actions bar (appears when > 0 selected):
  ┌────────────────────────────────────────┐
  │ Đã chọn: 5 đăng ký                     │
  │ [Duyệt tất cả] [Từ chối tất cả] [Hủy] │
  └────────────────────────────────────────┘

Progress modal:
  "Đang xử lý 3/5 đăng ký..."
  [Progress bar]
  
Result:
  Toast: "Đã duyệt 5/5 đăng ký thành công"
```

## g) Loading states

```
Initial load:
  - Skeleton loaders for stats cards
  - Shimmer placeholders for activity cards
  - Spinner for chart

Lazy load:
  - Infinite scroll for activities list
  - "Đang tải thêm..." spinner at bottom

Empty states:
  - No activities created:
    Icon: 📊 Activity (gray)
    Text: "Bạn chưa tạo hoạt động nào"
    Button: "+ Tạo hoạt động đầu tiên"
    
  - No pending registrations:
    Icon: ✅ CheckCircle (green)
    Text: "Không có đăng ký nào chờ duyệt"
    Subtitle: "Tuyệt vời! Bạn đã xử lý xong."
```

## h) API endpoints used

```javascript
GET /api/monitor/dashboard
  → Returns: stats, my activities, pending registrations

GET /api/monitor/activities
  Query params: { status, page, limit, sort }
  → Returns: List of activities created by monitor

POST /api/monitor/activities
  Body: { activity data }
  → Create new activity

PUT /api/monitor/activities/:id
  Body: { updated data }
  → Update activity

DELETE /api/monitor/activities/:id
  → Delete activity (only if pending)

GET /api/monitor/registrations/pending
  → Returns: List of pending registrations

POST /api/monitor/registrations/:id/approve
  → Approve registration

POST /api/monitor/registrations/:id/reject
  Body: { reason: string }
  → Reject registration with reason

POST /api/monitor/activities/:id/qr
  → Generate QR code for attendance

GET /api/monitor/class/stats
  → Returns: Class participation statistics
```

---

**[Tiếp tục ở file: `5.1_GIAO_DIEN_STUDENT.md`]**
